{
  "version": 2,
  "outputDirectory": "public",
  // Explicitly pin both Functions and legacy Builds to Node 20-compatible vercel-php
  "functions": {
    "api/**/*.php": {
      "runtime": "vercel-php@0.7.5",
      "maxDuration": 30
    }
  },
  "builds": [
    { "src": "api/**/*.php", "use": "vercel-php@0.7.5" }
  ],
  "routes": [
    { "handle": "filesystem" },
    { "src": "/(.*)", "dest": "/api/index.php" }
  ],
  "env": {
    "APP_ENV": "production",
    "APP_DEBUG": "false",
    "APP_URL": "https://edubridge-lyart.vercel.app",
    "LOG_CHANNEL": "errorlog",
    "LOG_LEVEL": "error",
    "CACHE_STORE": "array",
    "SESSION_DRIVER": "array",
    "QUEUE_CONNECTION": "sync",
    "DB_CONNECTION": "sqlite",
    "DB_DATABASE": ":memory:"
  }
}
